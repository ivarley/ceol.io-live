{% extends "base.html" %}

{% block content %}
<div class="landing-page" style="display: block;">

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible" role="alert" style="margin-bottom: 20px;">
                {{ message }}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close" onclick="this.parentElement.style.display='none'">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}

<p>Welcome to <strong>ceol.io</strong>, an online repository of traditional music session setlists and recordings.</p>
<p>If you're new to traditional Irish music, there's a brief guide <a href="/help#whats-a-session">here</a>.</p>
<h2 id="subcategories">Latest Session Logs</h2>

{% if active_sessions %}
    {% for session in active_sessions %}
        <div style="margin-bottom: 20px;">
            <h3><a href="/sessions/{{ session.path }}">{{ session.name }}</a></h3>
            {% if session.city or session.state or session.country %}
                <p style="margin: 5px 0; color: var(--disabled-text); font-size: 0.9em;">
                    {% if session.city %}{{ session.city }}{% endif %}{% if session.city and (session.state or session.country) %}, {% endif %}{% if session.state %}{{ session.state }}{% endif %}{% if session.state and session.country %}, {% endif %}{% if session.country %}{{ session.country }}{% endif %}
                </p>
            {% endif %}
            {% if session.recent_instances %}
                <ul style="margin: 5px 0 0 20px;">
                    {% for instance_date in session.recent_instances %}
                        <li><a href="/sessions/{{ session.path }}/{{ instance_date }}">{{ instance_date }}</a></li>
                    {% endfor %}
                </ul>
            {% else %}
                <p style="margin: 5px 0; color: var(--disabled-text); font-style: italic;">No session instances recorded yet.</p>
            {% endif %}
        </div>
    {% endfor %}
{% else %}
    <p>No active sessions found.</p>
{% endif %}
    
<!-- end landing page -->
</div>
{% endblock %}